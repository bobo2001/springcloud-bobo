<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="/bootstrap/bootstrap-datetimepicker/css/bootstrap-datetimepicker.css">
    <link rel="stylesheet" href="/bootstrap/bootstrap3/css/bootstrap.css">
    <link rel="stylesheet" href="/bootstrap/bootstrap-table/bootstrap-table.css">
    <link rel="stylesheet" href="/bootstrap/bootstrap-fileinput/css/fileinput.css">
    <link rel="stylesheet" href="/bootstrap/bootstrap-treeview/bootstrap-treeview.min.css">
    <link rel="stylesheet" href="/bootstrap/bootStrap-addTabs/bootstrap.addtabs.css">
    <script src="/bootstrap/easyui1.5/jquery.min.js"></script>
    <script src="/bootstrap/bootstrap3/js/bootstrap.js"></script>
    <script src="/bootstrap/bootstrap-table/bootstrap-table.js"></script>
    <script src="/bootstrap/bootstrap-table/locale/bootstrap-table-zh-CN.js"></script>
    <script src="/bootstrap/bootbox/bootbox.all.min.js"></script>
    <script src="/bootstrap/bootstrap-datetimepicker/js/bootstrap-datetimepicker.js"></script>
    <script src="/bootstrap/bootstrap-datetimepicker/js/locales/bootstrap-datetimepicker.zh-CN.js"></script>
    <script src="/bootstrap/bootstrap-fileinput/js/fileinput.js"></script>
    <script src="/bootstrap/bootstrap-fileinput/js/locales/zh.js"></script>
    <script src="/bootstrap/bootstrap-treeview/bootstrap-treeview.min.js"></script>
    <script src="/bootstrap/bootStrap-addTabs/bootstrap.addtabs.min.js"></script>
</head>
<body>
<div id="toolbar">
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<button type="button" class="btn btn-danger" onclick="delOrder()">删除</button>
    <!--&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;会员:<input type="text" id="huiyuan">
    <button type="button" class="btn btn-primary" data-toggle="button" onclick="serchBtn()">🔍</button>-->
</div>
<table id="TouBuTable"></table>
</body>

<script type="text/javascript">
    /*查询*/
    $("#TouBuTable").bootstrapTable({
        url: '/zhuanqu/findTouBuList',
        toolbar: '#toolbar',
        pagination: true, //是否展示分页
        pageList: [1,3, 5, 10, 20, 50],//分页组件
        pageNumber: 1,
        pageSize: 3,//默认每页条数
        //页面修饰
        showRefresh: true,//是否显示刷新按钮
        showToggle: true,//是否显示 切换试图（table/card）按钮
        detailView: true,//设置为 true 可以显示详细页面模式。
        showColumns: true,//是否显示 内容列下拉框
        clickToSelect: true, //是否启用点击选中行
        showPaginationSwitch: true,//是否显示 数据条数选择框
        //解决条查乱码
        method: "post",
        contentType:'application/x-www-form-urlencoded;charset=UTF-8',   //数据编码纯文本  offset=0&limit=5
        //传递参数,条件查询,分页传参
        /*queryParams: function () {
            return {
                //有分页的固定传值
                page: this.pageNumber,
                rows: this.pageSize,
            }
        },*/

        sidePagination: 'client',
        columns: [
            {field:"ds",checkbox:true},
            {field:'id',title:'编号'},
            {field:'name',title:'导航标题'},
            {field:'fangshi',title:'跳转方式'},
            {field:'paixu',title:'排序'},
            {field:'status',title:'状态',formatter:function (value,row,index){
                    var stu = "";
                    if (row.status == 1){
                        stu = "正常";
                    }
                    if(row.status == 0){
                        stu = "异常";
                    }
                    return stu;
                }},
            {field:'111',title:'操作',formatter:function(value,row,index){
                    return '<a href="javascript:delOrder('+row.id+')">删除</a>  |  <a href="javascript:update('+row.id+')">修改</a>'
                }}

        ]
    })
    /*    function serchBtn() {
            var huiyuan=$("#huiyuan").val();
            $('#OrderTable').bootstrapTable('refresh',{
                query:{
                    'huiyuan':huiyuan,
                }
            })

        }*/

    //批量删除
    function delOrder(){
        var arr = $("#TouBuTable").bootstrapTable("getSelections");
        if(arr.length<=0){//没有选择
            //bootbox.alert("请至少选择一条!");
            bootbox.alert({
                size: "small",
                title: "提示",
                message: "请至少选择一条!",
                buttons: {
                    ok: {
                        label: '确定',
                        className: 'btn-success'
                    }
                },
                callback: function(){}
            })
        }else{
            bootbox.confirm({
                size: "small",
                title: "提示",
                message: "是否确认删除？",
                buttons: {
                    confirm: {
                        label: '确定',
                        className: 'btn-success'
                    },
                    cancel: {
                        label: '取消',
                        className: 'btn-danger'
                    }
                },
                callback: function(result){
                    if(result){
                        //删除
                        var ids = "";
                        for(var i=0;i<arr.length;i++){
                            ids+=ids==""?arr[i].id:","+arr[i].id;
                        }
                        alert(ids);
                        $.ajax({
                            url:"/zhuanqu/delTouBuByIds",
                            type:"post",
                            data:{ids:ids},
                            success:function(){
                                //提示删除成功
                                bootbox.alert({
                                    size: "small",
                                    title: "提示",
                                    message: "删除成功!",
                                    buttons: {
                                        ok: {
                                            label: '确定',
                                            className: 'btn-success'
                                        }
                                    },
                                    callback: function(){}
                                })
                                //刷新表格
                                $("#TouBuTable").bootstrapTable("refresh");//表格刷新数据;
                            }
                        })
                    }
                }
            })
        }
    }

</script>
</html>